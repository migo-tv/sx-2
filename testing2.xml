<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<!------------EXYU----->
<item>
<title>EX AL | Test v1</title>


<link>$doregex[makelist2]</link>

<regex>
              <name>makelist2</name>
                        <listrepeat><![CDATA[
                        <title>[COLOR white]KANAL:[/COLOR] [makelist2.param1]</title>
                        <link>[makelist2.param2].m3u8&amp;hash=9d1ebe2397722563409b55904212337e&amp;time=0&amp;external_device= Buffer=300000 live=1 timeout=30</link>
              ]]></listrepeat>
              <expres>EXTINF:-1,AL: (.*).*\n.*(http.*).ts</expres>
              <page>http://portal.rapidiptv.com:8080/get.php?username=v7oxEnXqQd&amp;password=ZkTOFeHlnm&amp;type=m3u&amp;output=mpegts</page>
              <cookieJar></cookieJar>
</regex>
</item>
<!--<page>http://ipbestv.net16.net/testal.m3u</page>-->
<!-----------------------END--->


<item>
<title>TOP Channel Portokalli 2015 (YT)</title>
<link>$doregex[makelist]</link>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
    <title>BES-IPTV: [makelist.param2]</title>
    <link>plugin://plugin.video.youtube/play/?video_id=[makelist.param1]</link>
    <thumbnail>NA</thumbnail>
]]></listrepeat>
<expres>\s?.data-video-id="(.*?)".*data-title="(.*?)"</expres>
<page>https://www.youtube.com/playlist?list=PLM8BAxfZddjx4J5gzmtW8D-W1uD3-SjRC</page>
<referer>https://www.youtube.com/user/TopChannelAlbania/playlists</referer>
<cookieJar></cookieJar>
</regex>
</item>

<!-----------------END YOUTUBE---------------------------->

<!--------------------------------END------------------------------------->
<item>
<title>Cinestrenos.TV - Todos Los Canales | Espanol</title>
<link>$doregex[makelist]</link>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>Kannal: - [makelist.param2]</title>
<sportsdevil>http://cinestrenostv.tv[makelist.param1]</sportsdevil>
<referer></referer>
<thumbnail>[makelist.param3]</thumbnail>
]]></listrepeat>
<expres>a href="(.*)".*title="(.*?)".*?src="(.*?)"</expres>
<page>http://cinestrenostv.tv/</page>
<referer></referer>
<cookieJar></cookieJar>
</regex>
</item>

<!-----------------------------------yooutube test---->
<item>
<title>Top Channel Albania</title>
<link>$doregex[makelist]</link>
<regex>
            <name>makelist</name>
            <listrepeat><![CDATA[
                        <title>[makelist.param2]</title>
                        <link>plugin://plugin.video.youtube/play/?playlist_id=[makelist.param1]&amp;order=default</link>
                        <thumbnail>https://pbs.twimg.com/profile_images/552092989485355008/5iuVo5m9.png</thumbnail>
            ]]></listrepeat>
            <expres>\s?.href="\/playlist\?list=(.*?)"&gt;(.*?)&lt;\/</expres>
            <page>https://www.youtube.com/user/TopChannelAlbania/playlists</page>
             <cookieJar></cookieJar>
</regex>
<thumbnail>https://pbs.twimg.com/profile_images/552092989485355008/5iuVo5m9.png</thumbnail>
</item>

<!------------------------------------zunox------------->
<item>
<title>Zunox Test</title> 
<link>$doregex[rtmp] swfUrl=http://static3.sawlive.tv/player.swf pageUrl=http://sawlive.tv live=1 timeout=15</link> 
<regex>
<name>rtmp</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url='http://sawlive.tv/embed/zunoxhkhd1'):
	import requests
	import re
	referer = 'http://zunox.hk/'
	headers = {'Referer': referer}
	source = requests.get(url, headers=headers)
	embedpath1 = re.search(r'var.*?="(.*?)".*="(.*?)".*="(.*?)".*="(.*?)".*?"".*?""', source.text)
	embedpath2 = re.findall('var.*?=\'(.*?)\'', source.text)[0]
	embedurl= 'http://sawlive.tv/embed/watch/' + embedpath1.group(1) + embedpath1.group(2) + embedpath1.group(3) + embedpath1.group(4)+ '/' + embedpath2
	strsrc = requests.get(embedurl, headers=headers)
	streamer = re.findall('streamer\', \'(.*?)\'', strsrc.text)[0]
	playpath = re.findall('file\', \'(.*?)\'', strsrc.text)[0]
	rtmppath = streamer + ' playpath=' + playpath
	return rtmppath
]]></expres>
<page></page>
</regex>
<thumbnail></thumbnail>
</item>



<!--------------------------DLSTV REGEX TEST----------------------------->
<!----------------------------------------------END-->
<!-------------twoguns regex------------------->
<item>
<title> All Channels | www.zoptv.com</title>
<link>$doregex[makelist]</link>
<regex>
      <name>makelist</name>
      <listrepeat><![CDATA[
               <title>[makelist.param1]</title>
               <link>$doregex[makelist2]</link>
               <thumbnail>http://www.zoptv.com/images/logo.png</thumbnail>
      ]]></listrepeat>
      <expres>list-header"&gt;(.*?)&lt;\/div>(?s)(.*?)<\/ul</expres>
      <page>http://www.zoptv.com/channels/sports</page>
</regex>
<regex>
      <name>makelist2</name>
      <listrepeat><![CDATA[
               <title>[makelist2.param2]</title>
               <link>$doregex[makelist3]</link>
               <thumbnail>http://www.zoptv.com/images/logo.png</thumbnail>
      ]]></listrepeat>
      <expres>href="\/(.*?)"&gt;(.*?)&lt;\/</expres>
      <page>[makelist.param2]</page>
</regex>
<regex>
      <name>makelist3</name>
      <listrepeat><![CDATA[
               <title>[makelist3.param3]</title>
               <link>$doregex[rtmp1]$doregex[http1]$doregex[path]|User-Agent=iPhone</link>
               <link>$doregex[rtmp2]$doregex[http2]$doregex[path1]|User-Agent=iPhone</link>
               <thumbnail>http://www.zoptv.com[makelist3.param2]</thumbnail>
               <fanart>http://www.zoptv.com[makelist3.param2]</fanart>
      ]]></listrepeat>
      <expres>"zp-channel" href="(.*?)".*?src="(.*?)"..*?&gt;(.*?)..span.</expres>
      <page>http://www.zoptv.com/[makelist2.param1]</page>
</regex>
<regex>
<name>replace</name>
<expres>$pyFunction:'$doregex[decpage]'.replace('src','vid',2).replace('/sl/','').replace('/ds/','').replace('/le/','').replace('/ls/','').replace('http://www.iptvlinks.tk/fo','/xx/').replace('http://www.iptvlinks.tk/aj','/xx/').replace('http://www.iptvlinks.tk/eo','/xx/').replace('http://www.iptvlinks.tk/kl','/xx/')</expres>
<page></page>
<regex>
<name>replace1</name>
<expres>$pyFunction:'$doregex[decpage]'.replace('src','vid',2)</expres>
<page></page>
</regex>
</regex>
<regex>
<name>http1</name>
<expres>=.."vid":"(.{11}iptv.*?)embed</expres>
<page>$doregex[replace]</page>
</regex>
<regex>
<name>http2</name>
<expres>}.{"vid":"(.{11}iptv.*?)embed</expres>
<page>$doregex[replace]</page>
</regex>
<regex>
<name>rtmp1</name>
<expres>=.."vid":"(.*?)",.*?(?=hls|rtmp).*vid</expres>
<page>$doregex[replace1]</page>
</regex>
<regex>
<name>rtmp2</name>
<expres>}.{"vid":"(.*?)".".*?:"(?=hls|rtmp)</expres>
<page>$doregex[replace1]</page>
</regex>
<regex>
<name>path</name>
<expres>var src = '(.*?)'</expres>
<page>$doregex[embedurl]</page>
<referer>http://www.zoptv.com/</referer>
</regex>
<regex>
<name>path1</name>
<expres>var src = '(.*?)'</expres>
<page>$doregex[embedurl1]</page>
<referer>http://www.zoptv.com/</referer>
</regex>
<regex>
<name>embedurl</name>
<expres>=.{"vid":"(.*?)"</expres>
<page>$doregex[replace1]</page>
</regex>
<regex>
<name>embedurl1</name>
<expres>}.{"vid":"(.*?)"</expres>
<page>$doregex[replace1]</page>
</regex>
<regex>
<name>decpage</name>
<expres><![CDATA[#$pyFunction
import urllib,re,base64
def GetLSProData(page_data,Cookie_Jar,m):
    import base64
    s=page_data
    while '(atob(' in s:
        s=re.compile('\'(.*?)\'').findall(s)[0];
        s=base64.b64decode(s);
    return s
]]></expres>
<page>$doregex[encpage]</page>
</regex>
<regex>
<name>encpage</name>
<expres>(.atob.*)</expres>
<page>http://www.zoptv.com[makelist3.param1]</page>
</regex>
</item>
<!------------------------------------------------------->

<!------------------------------------------------------->

<!-------------------------------TEST--->

<item>
<title>TV | Temp</title>


<link>$doregex[makelist2]</link>

<regex>
              <name>makelist2</name>
                        <listrepeat><![CDATA[
                        <title>[COLOR white]KANAL: [/COLOR] [makelist2.param1]</title>
                        <link>[makelist2.param2]</link>
              ]]></listrepeat>
              <expres>&lt;title&gt;(.*)&lt;.*\n.*&lt;link&gt;(.*)&lt;</expres>
              <!--<expres>(.*).*\n.*(http.*)</expres>-->
              <page>http://ipbestv.net16.net/ontvshikode.xml</page>
              <cookieJar></cookieJar>
</regex>
</item>

<!----------------->

<!------------------------------end---->

<!-----------youtube-live----------->
<item>
<title>Channels TV  YouTubeLive Test</title>
<link>$doregex[url]</link>
<regex>
	<name>url</name>
	<expres>$pyFunction:'$doregex[jsonurl]'.replace('\/','/').replace('https','http')</expres>
	<page></page>
</regex>
<regex>
	<name>jsonurl</name>
	<expres>hlsvp":"(.*?)"</expres>
	<page>https://www.youtube.com/watch?v=ANM-dq5USTc</page>
</regex>
<thumbnail></thumbnail>
</item>

<!---------end--youtube-live----------->


<!-------------------------end--->
<item>
	<title>testrtv21</title>
	<link>http://tring-amd-live.tring.tv/out/u/287_359.m3u8|User-Agent=Android</link>
</item>

<item>
	<title>testklan1</title>
	<link>http://stream.ontv.al:8000/live/ontv/albania/7.m3u8|User-Agent=ontvalbania</link>
</item>

<!-------------Begin Live Dutch Chann List Works----------------->

<item>
<title>Live-Stream.TV</title>
<link>$doregex[makelist]</link>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
    <title>[makelist.param2]</title>
    <link>$doregex[update]$doregex[url]</link>
	<thumbnail>[makelist.param3]</thumbnail>
]]></listrepeat>
<expres>class="fp_item"&gt;\n.*\n.*href="(.*?)".*title="(.*?) Online.*?&gt;\n.*?src="(.*?)"</expres>
<page>http://www.live-stream.tv/</page>
</regex>
<regex>
<name>url</name>
<expres>{ file:'(.*?)'</expres>
<page>http://www.live-stream.tv[makelist.param1]</page>
</regex>
<regex>
<name>update</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):
 import requests
 from threading import Timer,Thread,Event
 import re
 upd = re.search(r'Statistics .\'(.*?)\'.\'(.*?)\'..\'(.*?)\'', page_data)
 url = 'http://' + upd.group(3) + '.ucount.in/stats/update/custom/lstv/' + upd.group(1) + '/' + upd.group(2) + '&_=&callback=\?'
 referer = 'http://www.live-stream.tv/'
 headers1 = {'User-Agent': 'iPhone', 'Referer': referer}
 requests.get(url, headers=headers1)
 class perpetualTimer():
    def __init__(self,t,hFunction):
       self.t=t
       self.hFunction = hFunction
       self.thread = Timer(self.t,self.handle_function)
    def handle_function(self):
      self.hFunction()
      self.thread = Timer(self.t,self.handle_function)
      import xbmc
      player=xbmc.Player()
      if player.isPlayingVideo():
         self.thread.start()
    def start(self):
       self.thread.start()
    def cancel(self):
       self.thread.cancel()
 def printer():
     requests.get(url, headers=headers1)
 t = perpetualTimer(30,printer)
 t.start()
 return ''
]]></expres>
<page>http://www.live-stream.tv[makelist.param1]</page>
</regex>
<thumbnail></thumbnail>
<fanart>http://www.live-stream.tv/images/lstv-logo.png</fanart>
</item>

<!------------------------------->
<item>
<title>TOP Channel - Portokalli</title>
<link>$doregex[makelist]</link>
<regex>
            <name>makelist</name>
            <listrepeat><![CDATA[
                        <title>[COLOR deepskyblue]TOP Channel - [/COLOR][makelist.param1]</title>
                        <link>plugin://plugin.video.youtube/play/?video_id=[makelist.param2]</link>
                        <thumbnail>https://i.ytimg.com/vi/[makelist.param2]/hqdefault.jpg</thumbnail>
            ]]></listrepeat>
            <expres>data-video-title="(.*?)".*?\n.*?\n.*?\n.*?\n.*?&lt;a href="\/watch\?v=(.*?)&amp;</expres>
            <page>https://www.youtube.com/watch?v=paNVvu0W7yQ&amp;list=PLM8BAxfZddjx4J5gzmtW8D-W1uD3-SjRC</page>
             <cookieJar></cookieJar>
</regex>

</item>
<!------------------------------------------------->

<item>
	<title>NFL TEST</title>
	<sportsdevil>http://ifirstrowus.eu/watch/49037/1/watch-nfl-network.html</sportsdevil>
	<referer>http://ifirstrowus.eu/watch/49037/1/watch-nfl-network.html</referer>
</item>

<item>
<title>Top Channel Albania</title>
<link>https://forums.tvaddons.ag/$doregex[makelist]</link>
<regex>
            <name>makelist</name>
            <listrepeat><=!=[=C=D=A=T=A=[
                        <title>[makelist.param2]</title>
                        <link>plugin://plugin.video.youtube/play/?playlist_id=[makelist.param1]&order=default</link>
                        <thumbnail>https://pbs.twimg.com/profile_images/552092989485355008/5iuVo5m9.png</thumbnail>
            ]=]=></listrepeat>
            <expres>\s?.href="\/playlist\?list=(.*?)">(.*?)<\/</expres>
            <page>https://www.youtube.com/user/TopChannelAlbania/playlists</page>
             <cookieJar></cookieJar>
</regex>
<thumbnail>https://pbs.twimg.com/profile_images/552092989485355008/5iuVo5m9.png</thumbnail>
</item>

<item>
<title>[COLOR FFFF00FF]Test[/COLOR]</title>
<link>http://iptv.ndasat.com:88/live/21041/21041/950.ts&amp;hash=1a7369176c5221f7931628b832c27117&amp;time=0&amp;external_device=&amp;hash=7e67cdd1ea843d168fb75dd49d110938 Buffer=300000 live=1 timeout=20</link>
</item>
<!------------------------>

<item>
<title>TEST | HBO +</title>        
<link>rtmp://109.200.202.124/live?wmsAuthSign=$doregex[id] playpath=hboplus swfUrl=http://www.tv-msn.com/player/player.swf live=1 pageUrl=http://tv-msn.com/hboplus.php token=cc9blb62db43975c</link>
<thumbnail></thumbnail>
<info>saydinx</info>
</item>

<!---------------------->

<item>
<title>HbO PLus</title>
<link>rtmp://109.200.202.124/live?wmsAuthSign=$doregex[auth]$doregex[id] playpath=hboplus swfUrl=http://www.tvmsn.com/player/player.swf pageUrl=http://www.tv-msn.com timeout=15 live=1 token=cc9bfb62db43975c</link>
<regex>
<name>auth</name>
<expres>$pyFunction:'$doregex[get-auth]'.replace('"','').replace(',','')</expres>
<page></page>
</regex>
<regex>
<name>get-auth</name>
<expres>var $doregex[vcod] = \[(.*?)\]</expres>
<page>http://tv-msn.com/hboplus.php</page>
<referer>http://www.tv-msn.com</referer>
</regex>
<regex>
<name>vcod</name>
<expres>join\(""\) \+ (.*?)\.join</expres>
<page>http://tv-msn.com/hboplus.php</page>
<referer>http://www.tv-msn.com</referer>
</regex>
<regex>
<name>id</name>
<expres>id=$doregex[vid]\>(.*?)\<</expres>
<page>http://tv-msn.com/hboplus.php</page>
<referer>http://www.tv-msn.com</referer>
</regex>
<regex>
<name>vid</name>
<expres>ById\("(.*?)"</expres>
<page>http://tv-msn.com/hboplus.php</page>
<referer>http://www.tv-msn.com</referer>
</regex>
</item>







<!----------------Y0UTUB3--PL4YL1ST----------------------->
<item>
<title>Youtube Playlists max 500 example **https://www.youtube.com/user/TopChannelAlbania/playlists**</title>
<link>$doregex[makelist]</link>
 
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[COLOR white]BES-IPTV: [/COLOR][makelist.param2]</title>
<link>$doregex[makelist2]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres>href="\/playlist\?list=(.*?)"&gt;(.*?)&lt;</expres>
<page>https://www.youtube.com/user/TopChannelAlbania/playlists</page>
<cookieJar></cookieJar>
</regex>
 
<regex>
<name>makelist2</name>
<listrepeat><![CDATA[
<title>Page - [makelist2.param1]</title>
<link>$doregex[makelist3]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres> (.*?),</expres>
<page>$doregex[get-number]</page>
<cookieJar></cookieJar>
</regex>
 
<regex>
            <name>makelist3</name>
            <listrepeat><![CDATA[
                        <title>[COLOR white]TOP Channel: [/COLOR][makelist3.param2]</title>
                        <link>plugin://plugin.video.youtube/play/?video_id=[makelist3.param1]</link>
                        <thumbnail>https://i.ytimg.com/vi/[makelist3.param1]/hqdefault.jpg</thumbnail>
            ]]></listrepeat>
            <expres>spf-link " dir="ltr" href="\/watch\?v=(.*?)&amp;.*?\n(.*)</expres>
            <page>$doregex[get-source-page]</page>
             <cookieJar></cookieJar>
</regex>
 
<regex>
<name>get-number</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):
 
 import requests
 import re
 url='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0', 'Accept-Language': 'en-US'}
 
 rr = requests.get(url, headers=headers)
 number = re.findall('</a></li><li>(.*?) vid', rr.text)[0]
 #number = number.encode('unicode-escape')
 number = number.replace(',', '')
 real = int(float(number)) / 100
 real2 = real + 3
 
 liste = list(range(real2))
 return liste
]]></expres>
<page></page>
</regex>
 
<regex>
<name>get-source-page</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):
 
 import requests
 import re
 import json
 
 
 pageUrl='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0'}
 
 r1 = requests.get(pageUrl, headers = headers)
 source1= r1.text
 page =[makelist2.param1]
 N= int(float(page))
 pre= 'https://www.youtube.com'
 if (N != 1):
 
  if (N ==2):
   continue1 = re.findall('data-uix-load-more-href="(.*?)"', source1)[0]
   continuation1 = pre + continue1
   r2 = requests.get(continuation1, headers = headers)
   source2= r2.text
   jdata=json.loads(source2)
   source2=jdata["load_more_widget_html"]
   page2 = jdata["content_html"]
   return page2
 
  else:
   if (N==3):
    continue1 = re.findall('data-uix-load-more-href="(.*?)"', source1)[0]
    continuation1 = pre + continue1
    r2 = requests.get(continuation1, headers = headers)
    source2= r2.text
    jdata=json.loads(source2)
    source2=jdata["load_more_widget_html"]
    page2 = jdata["content_html"]
    continue2 = re.findall('data-uix-load-more-href="(.*?)"', source2)[0]
    continuation2 = pre + continue2
    r3 = requests.get(continuation2, headers = headers)
    source3 = r3.text
    jdata=json.loads(source3)
    source3=jdata["load_more_widget_html"]
    page3 = jdata["content_html"]
    return page3
 
   else:
    if (N==4):
     continue1 = re.findall('data-uix-load-more-href="(.*?)"', source1)[0]
     continuation1 = pre + continue1
     r2 = requests.get(continuation1, headers = headers)
     source2= r2.text
     jdata=json.loads(source2)
     source2=jdata["load_more_widget_html"]
     page2 = jdata["content_html"]
     continue2 = re.findall('data-uix-load-more-href="(.*?)"', source2)[0]
     continuation2 = pre + continue2
     r3 = requests.get(continuation2, headers = headers)
     source3 = r3.text
     jdata=json.loads(source3)
     source3=jdata["load_more_widget_html"]
     page3 = jdata["content_html"]
     continue3 = re.findall('data-uix-load-more-href="(.*?)"', source3)[0]
     continuation3 = pre + continue3    
     r4 = requests.get(continuation3, headers = headers)
     source4 = r4.text
     jdata=json.loads(source4)
     source4=jdata["load_more_widget_html"]
     page4 = jdata["content_html"]
     return page4
 
    else:
     if (N==5):
      continue1 = re.findall('data-uix-load-more-href="(.*?)"', source1)[0]
      continuation1 = pre + continue1
      r2 = requests.get(continuation1, headers = headers)
      source2= r2.text
      jdata=json.loads(source2)
      source2=jdata["load_more_widget_html"]
      page2 = jdata["content_html"]
      continue2 = re.findall('data-uix-load-more-href="(.*?)"', source2)[0]
      continuation2 = pre + continue2
      r3 = requests.get(continuation2, headers = headers)
      source3 = r3.text
      jdata=json.loads(source3)
      source3=jdata["load_more_widget_html"]
      page3 = jdata["content_html"]
      continue3 = re.findall('data-uix-load-more-href="(.*?)"', source3)[0]
      continuation3 = pre + continue3    
      r4 = requests.get(continuation3, headers = headers)
      source4 = r4.text
      jdata=json.loads(source4)
      source4=jdata["load_more_widget_html"]
      page4 = jdata["content_html"]
      continue4 = re.findall('data-uix-load-more-href="(.*?)"', source4)[0]
      continuation4 = pre + continue4
      r5 = requests.get(continuation4, headers = headers)
      source5 = r5.text
      jdata=json.loads(source5)
      source5=jdata["load_more_widget_html"]
      page5 = jdata["content_html"]
      return page5
     
 else:
 
  #return source1.encode('unicode-escape')
  return source1
]]></expres>
<page></page>
</regex>
 
</item>
