<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<poster>BES-IPTV Say's Hello; YOU'VE JUST GOT INFECTED WITH A TROJAN HORSE VIRUS!</poster>
<fanart>http://s10.postimg.org/npeunmfx5/fanart.png</fanart>

<!-----
 <channel>
    <name>[COLOR yellow]MUZIKE SHQIP[/COLOR][COLOR gray] (Hite/TeReja/Festa/Folk/Custom)[/COLOR]</name>
    <thumbnail></thumbnail>
    <link>#</link> 
    <externallink>https://raw.githubusercontent.com/saydinx/bes-iptv/master/youtubetv.m3u</externallink>
    <fanart></fanart>
    
    <channel>
    <name>YOUTUBE PLAYLISTS (FULL)</name>
    <thumbnail>#</thumbnail>
    <fanart></fanart>
        <items>
-->

<item>
<title>[COLOR yellow]MUZIKE SHQIP[/COLOR][COLOR gray] (Hite/TeReja/Festa/Folk/Custom)[/COLOR]</title>
			<link>http://Ignoreme</link>
			<externallink>https://raw.githubusercontent.com/saydinx/bes-iptv/master/youtubetv.m3u</externallink>
</item>

<item>
<title>[COLOR white]TOP CHANNEL PLAYLISTS[/COLOR] (Full)</title>
<link>$doregex[makelist]</link>

<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[COLOR blue]BES-IPTV: [/COLOR][makelist.param2]</title>
<link>$doregex[makelist2]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres>href="\/playlist\?list=(.*?)"&gt;(.*?)&lt;</expres>
<page>https://www.youtube.com/user/TopChannelAlbania/playlists</page>
<cookieJar></cookieJar>
</regex>

<regex>
<name>makelist2</name>
<listrepeat><![CDATA[
<title>[COLOR blue]BES-IPTV: [/COLOR]- Page: [makelist2.param1]</title>
<link>$doregex[makelist3]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres> (.*?),</expres>
<page>$doregex[get-number]</page>
<cookieJar></cookieJar>
</regex>

<regex>
            <name>makelist3</name>
            <listrepeat><![CDATA[
                        <title>[COLOR deepskyblue]TOP Channel:[/COLOR][makelist3.param2]</title>
                        <link>plugin://plugin.video.youtube/play/?video_id=[makelist3.param1]</link>
                        <thumbnail>https://i.ytimg.com/vi/[makelist3.param1]/hqdefault.jpg</thumbnail>
            ]]></listrepeat>
            <expres>spf-link " dir="ltr" href="\/watch\?v=(.*?)&amp;.*?\n(.*)</expres>
            <page>$doregex[get-source-page]</page>
             <cookieJar></cookieJar>
</regex>

<regex>
<name>get-number</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):

 import requests
 import re
 url='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0', 'Accept-Language': 'en-US'}

 rr = requests.get(url, headers=headers)
 number = re.findall('</a></li><li>(.*?) vid', rr.text)[0]
 #number = number.encode('unicode-escape')
 number = number.replace(',', '')
 real = int(float(number)) / 100
 real2 = real + 3

 liste = list(range(real2))
 return liste
]]></expres>
<page></page>
</regex>

<regex>
<name>get-source-page</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):

 import requests
 import re
 import json

 pageUrl='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0'}
 r1 = requests.get(pageUrl, headers = headers)
 source = r1.text
 page = [makelist2.param1]
 N = int(float(page))
 pre = 'https://www.youtube.com'
 if (N > 1):

   for itr in range (1,N):
    continuex = re.findall('data-uix-load-more-href="(.*?)"', source)[0]
    continuationx = pre + continuex
    r = requests.get(continuationx, headers = headers)
    source = r.text
    jdata = json.loads(source)
    source = jdata["load_more_widget_html"]
    page = jdata["content_html"]
   return page
    
 else:

  return source
]]></expres>
<page></page>
</regex>
</item>


<!---------R21-------Y0UTUB3--PL4YL1ST----------------------->
<item>
<title>[COLOR white]RTV 21 PLAYLISTS[/COLOR] (Full)</title>
<link>$doregex[makelist]</link>

<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[COLOR blue]BES-IPTV: [/COLOR][makelist.param2]</title>
<link>$doregex[makelist2]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres>href="\/playlist\?list=(.*?)"&gt;(.*?)&lt;</expres>
<page>https://www.youtube.com/user/rtv21official/playlists</page>
<cookieJar></cookieJar>
</regex>

<regex>
<name>makelist2</name>
<listrepeat><![CDATA[
<title>[COLOR blue]BES-IPTV: [/COLOR]- Page - [makelist2.param1]</title>
<link>$doregex[makelist3]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres> (.*?),</expres>
<page>$doregex[get-number]</page>
<cookieJar></cookieJar>
</regex>

<regex>
            <name>makelist3</name>
            <listrepeat><![CDATA[
                        <title>[COLOR deepskyblue]RTV 21:[/COLOR][makelist3.param2]</title>
                        <link>plugin://plugin.video.youtube/play/?video_id=[makelist3.param1]</link>
                        <thumbnail>https://i.ytimg.com/vi/[makelist3.param1]/hqdefault.jpg</thumbnail>
            ]]></listrepeat>
            <expres>spf-link " dir="ltr" href="\/watch\?v=(.*?)&amp;.*?\n(.*)</expres>
            <page>$doregex[get-source-page]</page>
             <cookieJar></cookieJar>
</regex>

<regex>
<name>get-number</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):

 import requests
 import re
 url='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0', 'Accept-Language': 'en-US'}

 rr = requests.get(url, headers=headers)
 number = re.findall('</a></li><li>(.*?) vid', rr.text)[0]
 #number = number.encode('unicode-escape')
 number = number.replace(',', '')
 real = int(float(number)) / 100
 real2 = real + 3

 liste = list(range(real2))
 return liste
]]></expres>
<page></page>
</regex>

<regex>
<name>get-source-page</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):

 import requests
 import re
 import json

 pageUrl='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0'}
 r1 = requests.get(pageUrl, headers = headers)
 source = r1.text
 page = [makelist2.param1]
 N = int(float(page))
 pre = 'https://www.youtube.com'
 if (N > 1):

   for itr in range (1,N):
    continuex = re.findall('data-uix-load-more-href="(.*?)"', source)[0]
    continuationx = pre + continuex
    r = requests.get(continuationx, headers = headers)
    source = r.text
    jdata = json.loads(source)
    source = jdata["load_more_widget_html"]
    page = jdata["content_html"]
   return page
    
 else:

  return source
]]></expres>
<page></page>
</regex>
</item>

<!-----------------------------END------RTV21-------------->


<!--------KTV--------Y0UTUB3--PL4YL1ST----------------------->
<item>
<title>[COLOR white]KTV KOHAVISION PLAYLISTS[/COLOR] (Full)</title>
<link>$doregex[makelist]</link>

<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[COLOR blue]BES-IPTV: [/COLOR][makelist.param2]</title>
<link>$doregex[makelist2]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres>href="\/playlist\?list=(.*?)"&gt;(.*?)&lt;</expres>
<page>https://www.youtube.com/user/KohavisionOfficial/playlists</page>
<cookieJar></cookieJar>
</regex>

<regex>
<name>makelist2</name>
<listrepeat><![CDATA[
<title>[COLOR blue]BES-IPTV: [/COLOR]- Page - [makelist2.param1]</title>
<link>$doregex[makelist3]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres> (.*?),</expres>
<page>$doregex[get-number]</page>
<cookieJar></cookieJar>
</regex>

<regex>
            <name>makelist3</name>
            <listrepeat><![CDATA[
                        <title>[COLOR deepskyblue]KTV:[/COLOR][makelist3.param2]</title>
                        <link>plugin://plugin.video.youtube/play/?video_id=[makelist3.param1]</link>
                        <thumbnail>https://i.ytimg.com/vi/[makelist3.param1]/hqdefault.jpg</thumbnail>
            ]]></listrepeat>
            <expres>spf-link " dir="ltr" href="\/watch\?v=(.*?)&amp;.*?\n(.*)</expres>
            <page>$doregex[get-source-page]</page>
             <cookieJar></cookieJar>
</regex>

<regex>
<name>get-number</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):

 import requests
 import re
 url='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0', 'Accept-Language': 'en-US'}

 rr = requests.get(url, headers=headers)
 number = re.findall('</a></li><li>(.*?) vid', rr.text)[0]
 #number = number.encode('unicode-escape')
 number = number.replace(',', '')
 real = int(float(number)) / 100
 real2 = real + 3

 liste = list(range(real2))
 return liste
]]></expres>
<page></page>
</regex>

<regex>
<name>get-source-page</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):

 import requests
 import re
 import json

 pageUrl='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0'}
 r1 = requests.get(pageUrl, headers = headers)
 source = r1.text
 page = [makelist2.param1]
 N = int(float(page))
 pre = 'https://www.youtube.com'
 if (N > 1):

   for itr in range (1,N):
    continuex = re.findall('data-uix-load-more-href="(.*?)"', source)[0]
    continuationx = pre + continuex
    r = requests.get(continuationx, headers = headers)
    source = r.text
    jdata = json.loads(source)
    source = jdata["load_more_widget_html"]
    page = jdata["content_html"]
   return page
    
 else:

  return source
]]></expres>
<page></page>
</regex>
</item>

<!-----------------------------END-------KTV------------->




<!--------KL4NTV--------Y0UTUB3--PL4YL1ST----------------------->
<item>
<title>[COLOR white]KLAN TV PLAYLISTS[/COLOR] (Full)</title>
<link>$doregex[makelist]</link>

<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[COLOR blue]BES-IPTV: [/COLOR][makelist.param2]</title>
<link>$doregex[makelist2]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres>href="\/playlist\?list=(.*?)"&gt;(.*?)&lt;</expres>
<page>https://www.youtube.com/user/televizioniKLAN/playlists</page>
<cookieJar></cookieJar>
</regex>

<regex>
<name>makelist2</name>
<listrepeat><![CDATA[
<title>[COLOR blue]BES-IPTV: [/COLOR]- Page - [makelist2.param1]</title>
<link>$doregex[makelist3]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres> (.*?),</expres>
<page>$doregex[get-number]</page>
<cookieJar></cookieJar>
</regex>

<regex>
            <name>makelist3</name>
            <listrepeat><![CDATA[
                        <title>[COLOR deepskyblue]KLAN TV:[/COLOR][makelist3.param2]</title>
                        <link>plugin://plugin.video.youtube/play/?video_id=[makelist3.param1]</link>
                        <thumbnail>https://i.ytimg.com/vi/[makelist3.param1]/hqdefault.jpg</thumbnail>
            ]]></listrepeat>
            <expres>spf-link " dir="ltr" href="\/watch\?v=(.*?)&amp;.*?\n(.*)</expres>
            <page>$doregex[get-source-page]</page>
             <cookieJar></cookieJar>
</regex>

<regex>
<name>get-number</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):

 import requests
 import re
 url='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0', 'Accept-Language': 'en-US'}

 rr = requests.get(url, headers=headers)
 number = re.findall('</a></li><li>(.*?) vid', rr.text)[0]
 #number = number.encode('unicode-escape')
 number = number.replace(',', '')
 real = int(float(number)) / 100
 real2 = real + 3

 liste = list(range(real2))
 return liste
]]></expres>
<page></page>
</regex>

<regex>
<name>get-source-page</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):

 import requests
 import re
 import json

 pageUrl='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0'}
 r1 = requests.get(pageUrl, headers = headers)
 source = r1.text
 page = [makelist2.param1]
 N = int(float(page))
 pre = 'https://www.youtube.com'
 if (N > 1):

   for itr in range (1,N):
    continuex = re.findall('data-uix-load-more-href="(.*?)"', source)[0]
    continuationx = pre + continuex
    r = requests.get(continuationx, headers = headers)
    source = r.text
    jdata = json.loads(source)
    source = jdata["load_more_widget_html"]
    page = jdata["content_html"]
   return page
    
 else:

  return source
]]></expres>
<page></page>
</regex>
</item>

<!-----------------------------END-----KLANTV--------------->




<!-------VOALB---------Y0UTUB3--PL4YL1ST----------------------->
<item>
<title>[COLOR white]THE VOICE OF ALBANIA PLAYLISTS[/COLOR] (Full)</title>
<link>$doregex[makelist]</link>

<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[COLOR blue]BES-IPTV: [/COLOR][makelist.param2]</title>
<link>$doregex[makelist2]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres>href="\/playlist\?list=(.*?)"&gt;(.*?)&lt;</expres>
<page>https://www.youtube.com/channel/UCpyG8CqhK3ZZR-jhjaB0gLQ/playlists</page>
<cookieJar></cookieJar>
</regex>

<regex>
<name>makelist2</name>
<listrepeat><![CDATA[
<title>[COLOR blue]BES-IPTV: [/COLOR]- Page - [makelist2.param1]</title>
<link>$doregex[makelist3]</link>
<referer></referer>
<thumbnail></thumbnail>
]]></listrepeat>
<expres> (.*?),</expres>
<page>$doregex[get-number]</page>
<cookieJar></cookieJar>
</regex>

<regex>
            <name>makelist3</name>
            <listrepeat><![CDATA[
                        <title>[COLOR deepskyblue]VOALB:[/COLOR][makelist3.param2]</title>
                        <link>plugin://plugin.video.youtube/play/?video_id=[makelist3.param1]</link>
                        <thumbnail>https://i.ytimg.com/vi/[makelist3.param1]/hqdefault.jpg</thumbnail>
            ]]></listrepeat>
            <expres>spf-link " dir="ltr" href="\/watch\?v=(.*?)&amp;.*?\n(.*)</expres>
            <page>$doregex[get-source-page]</page>
             <cookieJar></cookieJar>
</regex>

<regex>
<name>get-number</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):

 import requests
 import re
 url='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0', 'Accept-Language': 'en-US'}

 rr = requests.get(url, headers=headers)
 number = re.findall('</a></li><li>(.*?) vid', rr.text)[0]
 #number = number.encode('unicode-escape')
 number = number.replace(',', '')
 real = int(float(number)) / 100
 real2 = real + 3

 liste = list(range(real2))
 return liste
]]></expres>
<page></page>
</regex>

<regex>
<name>get-source-page</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):

 import requests
 import re
 import json

 pageUrl='https://www.youtube.com/playlist?list=' + '[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0'}
 r1 = requests.get(pageUrl, headers = headers)
 source = r1.text
 page = [makelist2.param1]
 N = int(float(page))
 pre = 'https://www.youtube.com'
 if (N > 1):

   for itr in range (1,N):
    continuex = re.findall('data-uix-load-more-href="(.*?)"', source)[0]
    continuationx = pre + continuex
    r = requests.get(continuationx, headers = headers)
    source = r.text
    jdata = json.loads(source)
    source = jdata["load_more_widget_html"]
    page = jdata["content_html"]
   return page
    
 else:

  return source
]]></expres>
<page></page>
</regex>
</item>

<!-----------------------------END----VOA---------------->

